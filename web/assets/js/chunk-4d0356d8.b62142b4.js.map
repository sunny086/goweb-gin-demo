{"version":3,"sources":["webpack:///./src/components/main/InfoComponent.vue?0f1c","webpack:///src/components/main/InfoComponent.vue","webpack:///./src/components/main/InfoComponent.vue?9d6b","webpack:///./src/components/main/InfoComponent.vue","webpack:///./src/components/main/InfoComponent.vue?6b5b"],"names":["render","_vm","this","_h","$createElement","_c","_self","class","mainDiv","staticStyle","attrs","on","$event","tripTo","_v","staticClass","_s","infoData","header","_l","item","index","key","title","ref","refInFor","onEditorBlur","onEditorFocus","onEditorChange","model","value","callback","$$v","$set","expression","fileList","showUploadList","xToken","xUserId","removeFile","handlePreview","handleChange","_e","previewVisible","handleCancel","previewImage","fileList2","handleChange2","_m","sendToClass","canEdit","userChange","sends","li","ID","userName","editReports","comment","CreatedAt","addComment","staticRenderFns","component"],"mappings":"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","file":"assets/js/chunk-4d0356d8.b62142b4.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:_vm.mainDiv},[_c('div',[_c('a-button',{staticStyle:{\"float\":\"right\"},attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.tripTo()}}},[_vm._v(\" 返回 \")])],1),_c('div',{staticClass:\"header_write\"},[_vm._v(_vm._s(_vm.infoData.header))]),_vm._l((_vm.infoData.contents),function(item,index){return _c('div',{key:index},[_c('div',{staticStyle:{\"font-weight\":\"600\"}},[_vm._v(_vm._s(item.title)+\"：\")]),_c('quill-editor',{ref:index,refInFor:true,staticStyle:{\"margin-top\":\"20px\"},attrs:{\"id\":index},on:{\"blur\":function($event){return _vm.onEditorBlur($event, index)},\"focus\":function($event){return _vm.onEditorFocus($event, index)},\"change\":function($event){return _vm.onEditorChange($event)}},model:{value:(item.content),callback:function ($$v) {_vm.$set(item, \"content\", $$v)},expression:\"item.content\"}})],1)}),_c('div',{staticStyle:{\"font-weight\":\"600\"}},[_vm._v(\"图片上传\")]),_c('div',[_c('div',{staticClass:\"clearfix\"},[_c('a-upload',{attrs:{\"action\":\"/week/fileUploadAndDownload/upload\",\"list-type\":\"picture-card\",\"file-list\":_vm.fileList,\"showUploadList\":_vm.showUploadList,\"accept\":\".png,.jpeg,.jpg\",\"headers\":{ 'x-token': _vm.xToken, 'x-user-id':  _vm.xUserId},\"remove\":_vm.removeFile},on:{\"preview\":_vm.handlePreview,\"change\":_vm.handleChange}},[(_vm.canEdit)?_c('div',[_c('a-icon',{attrs:{\"type\":\"plus\"}}),_c('div',{staticClass:\"ant-upload-text\"},[_vm._v(\" Upload \")])],1):_vm._e()]),_c('a-modal',{attrs:{\"visible\":_vm.previewVisible,\"footer\":null},on:{\"cancel\":_vm.handleCancel}},[_c('img',{staticStyle:{\"width\":\"100%\"},attrs:{\"alt\":\"example\",\"src\":_vm.previewImage}})])],1)]),_c('div',{staticStyle:{\"font-weight\":\"600\"}},[_vm._v(\"文件上传\")]),_c('div',[_c('div',{staticClass:\"clearfix\"},[_c('a-upload',{attrs:{\"action\":\"/week/fileUploadAndDownload/upload\",\"file-list\":_vm.fileList2,\"showUploadList\":_vm.showUploadList,\"headers\":{ 'x-token': _vm.xToken, 'x-user-id':  _vm.xUserId},\"remove\":_vm.removeFile},on:{\"change\":_vm.handleChange2}},[(_vm.canEdit)?_c('div',[_c('a-button',[_c('a-icon',{attrs:{\"type\":\"upload\"}}),_vm._v(\" Upload \")],1)],1):_vm._e()])],1)]),_vm._m(0),_c('a-select',{class:_vm.sendToClass,staticStyle:{\"width\":\"100%\"},attrs:{\"mode\":\"multiple\",\"placeholder\":\"请选择人员\",\"disabled\":!_vm.canEdit},on:{\"change\":_vm.userChange},model:{value:(_vm.sends),callback:function ($$v) {_vm.sends=$$v},expression:\"sends\"}},_vm._l((_vm.userList),function(li){return _c('a-select-option',{key:li.ID},[_vm._v(\" \"+_vm._s(li.userName)+\" \")])}),1),(_vm.sendToClass === 'cannotSubmit')?_c('span',{staticStyle:{\"color\":\"red\"}},[_vm._v(\"请选择人员\")]):_vm._e(),(_vm.canEdit)?_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('a-button',{staticStyle:{\"width\":\"400px\",\"margin-top\":\"20px\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.editReports}},[_vm._v(\" 提交周报 \")])],1):_vm._e(),_c('div',{staticStyle:{\"margin\":\"20px 0\",\"font-size\":\"18px\",\"font-weight\":\"600\"}},[_vm._v(\"评论\")]),_vm._l((_vm.commentsList),function(li,index){return _c('div',[(index !== 0)?_c('hr'):_vm._e(),_c('div',{staticStyle:{\"font-size\":\"16px\",\"font-weight\":\"600\"}},[_vm._v(_vm._s(li.userName)+\"：\")]),_c('div',[_vm._v(\"      \"+_vm._s(li.comment))]),_c('div',{staticStyle:{\"width\":\"100%\",\"text-align\":\"right\"}},[_vm._v(_vm._s(li.CreatedAt))])])}),_c('div',[_c('a-textarea',{attrs:{\"placeholder\":\"请输入评论\",\"rows\":4},model:{value:(_vm.comment),callback:function ($$v) {_vm.comment=$$v},expression:\"comment\"}}),_c('div',{staticStyle:{\"width\":\"100%\",\"text-align\":\"center\"}},[_c('a-button',{staticStyle:{\"margin-top\":\"20px\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addComment}},[_vm._v(\" 提交评论 \")])],1)],1)],2)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"font-weight\":\"600\",\"margin\":\"20px 0 0 0\"}},[_c('span',{staticStyle:{\"color\":\"red\"}},[_vm._v(\"*\")]),_vm._v(\"发送给\")])}]\n\nexport { render, staticRenderFns }","<template>\r\n    <div :class=\"mainDiv\">\r\n        <div>\r\n            <a-button type=\"primary\" style=\"float: right\" @click=\"tripTo()\"> 返回 </a-button>\r\n        </div>\r\n\r\n        <div class=\"header_write\">{{infoData.header}}</div>\r\n        <!--        模板内容-->\r\n        <div v-for=\"(item, index) in infoData.contents\" :key=\"index\">\r\n            <div style=\"font-weight: 600;\">{{item.title}}：</div>\r\n            <quill-editor\r\n                    :id=\"index\"\r\n                    style=\"margin-top: 20px\"\r\n                    v-model=\"item.content\"\r\n                    :ref=\"index\"\r\n                    @blur=\"onEditorBlur($event, index)\" @focus=\"onEditorFocus($event, index)\"\r\n                    @change=\"onEditorChange($event)\">\r\n            </quill-editor>\r\n        </div>\r\n\r\n        <div style=\"font-weight: 600;\">图片上传</div>\r\n        <div>\r\n            <div class=\"clearfix\">\r\n                <a-upload\r\n                        action=\"/week/fileUploadAndDownload/upload\"\r\n                        list-type=\"picture-card\"\r\n                        :file-list=\"fileList\"\r\n                        @preview=\"handlePreview\"\r\n                        @change=\"handleChange\"\r\n                        :showUploadList=\"showUploadList\"\r\n                        accept=\".png,.jpeg,.jpg\"\r\n                        :headers=\"{ 'x-token': xToken, 'x-user-id':  xUserId}\"\r\n                        :remove=\"removeFile\"\r\n                >\r\n                    <div v-if=\"canEdit\">\r\n                        <a-icon type=\"plus\" />\r\n                        <div class=\"ant-upload-text\">\r\n                            Upload\r\n                        </div>\r\n                    </div>\r\n                </a-upload>\r\n                <a-modal :visible=\"previewVisible\" :footer=\"null\" @cancel=\"handleCancel\">\r\n                    <img alt=\"example\" style=\"width: 100%\" :src=\"previewImage\" />\r\n                </a-modal>\r\n            </div>\r\n        </div>\r\n\r\n        <div style=\"font-weight: 600;\">文件上传</div>\r\n        <div>\r\n            <div class=\"clearfix\">\r\n                <a-upload\r\n                        action=\"/week/fileUploadAndDownload/upload\"\r\n                        :file-list=\"fileList2\"\r\n                        @change=\"handleChange2\"\r\n                        :showUploadList=\"showUploadList\"\r\n                        :headers=\"{ 'x-token': xToken, 'x-user-id':  xUserId}\"\r\n                        :remove=\"removeFile\"\r\n                >\r\n                    <div v-if=\"canEdit\">\r\n                        <a-button> <a-icon type=\"upload\" /> Upload </a-button>\r\n                    </div>\r\n                </a-upload>\r\n            </div>\r\n        </div>\r\n\r\n        <div style=\"font-weight: 600; margin: 20px 0 0 0\"><span style=\"color: red\">*</span>发送给</div>\r\n        <a-select\r\n                mode=\"multiple\"\r\n                style=\"width: 100%\"\r\n                placeholder=\"请选择人员\"\r\n                @change=\"userChange\"\r\n                v-model=\"sends\"\r\n                :disabled=\"!canEdit\"\r\n                :class=\"sendToClass\"\r\n        >\r\n            <a-select-option v-for=\"li in userList\" :key=\"li.ID\">\r\n                {{li.userName}}\r\n            </a-select-option>\r\n        </a-select>\r\n        <span style=\"color: red\" v-if=\"sendToClass === 'cannotSubmit'\">请选择人员</span>\r\n\r\n        <div style=\"text-align: center\" v-if=\"canEdit\">\r\n            <a-button type=\"primary\" style=\"width: 400px; margin-top: 20px\" @click=\"editReports\"> 提交周报 </a-button>\r\n        </div>\r\n\r\n        <div style=\"margin: 20px 0; font-size: 18px; font-weight: 600\">评论</div>\r\n        <div v-for=\"(li, index) in commentsList\">\r\n            <hr v-if=\"index !== 0\"/>\r\n\r\n            <div style=\"font-size: 16px; font-weight: 600\">{{li.userName}}：</div>\r\n            <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{li.comment}}</div>\r\n            <div style=\"width: 100%; text-align: right\">{{li.CreatedAt}}</div>\r\n        </div>\r\n        <div>\r\n            <a-textarea placeholder=\"请输入评论\" v-model=\"comment\" :rows=\"4\" />\r\n            <div style=\"width: 100%; text-align: center\">\r\n                <a-button type=\"primary\" style=\"margin-top: 20px;\" @click=\"addComment\"> 提交评论 </a-button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import api from '../../utils/api'\r\n    import { quillEditor } from \"vue-quill-editor\";\r\n    import 'quill/dist/quill.core.css';\r\n    import 'quill/dist/quill.snow.css';\r\n    import 'quill/dist/quill.bubble.css';\r\n\r\n    function getBase64(file) {\r\n        return new Promise((resolve, reject) => {\r\n            const reader = new FileReader();\r\n            reader.readAsDataURL(file);\r\n            reader.onload = () => resolve(reader.result);\r\n            reader.onerror = error => reject(error);\r\n        });\r\n    }\r\n    export default {\r\n        name: \"InfoComponent\",\r\n        components: {quillEditor},\r\n        created() {\r\n            this.infoId = JSON.parse(this.$route.query.data);\r\n            // 查询人员列表\r\n            this.findUserList();\r\n            // 根据id查询周报\r\n            this.findData();\r\n        },\r\n        data() {\r\n            return {\r\n                mainDiv: 'top0',\r\n                infoId: '',\r\n                infoData: {},\r\n                canEdit: false,\r\n                showUploadList: {},\r\n\r\n                // 图片上传\r\n                fileList: [],\r\n                previewVisible: false,\r\n                previewImage: '',\r\n                xToken: sessionStorage.getItem('login'),\r\n                xUserId: sessionStorage.getItem('userId'),\r\n                pictures: [],\r\n                // 文件上传\r\n                fileList2: [],\r\n                // 周报模板\r\n                template: {},\r\n                // 人员列表\r\n                userList: [],\r\n                sends: [],\r\n                attachments: [],\r\n                // 发送到(选中人员列表)\r\n                sendTo: [],\r\n                sendToClass: 'canSubmit',\r\n                // 周报\r\n                commentsList: [],\r\n                comment: ''\r\n            }\r\n        },\r\n        methods: {\r\n            tripTo() {\r\n                this.$router.push('viewWeeklyReport');\r\n            },\r\n            findData() {\r\n                this.$axios.get(api.FIND_REPORT_BY_ID.url + `?id=${this.infoId}`).then(res => {\r\n                    if (res.data.code === 0) {\r\n                        this.infoData = res.data.data.rewtReports;\r\n\r\n                        if (this.infoData.userId === Number(sessionStorage.getItem('userId'))) {\r\n                            this.canEdit = true;\r\n                        } else {\r\n                            this.showUploadList = {showRemoveIcon: false};\r\n                            setTimeout(() => {\r\n                                for (const li of document.getElementsByClassName('ql-toolbar')) {\r\n                                    li.style.display = 'none';\r\n                                }\r\n                            }, 80);\r\n                            this.mainDiv = 'top1'\r\n                        }\r\n\r\n                        // 获取周报评论\r\n\r\n\r\n                        this.findComments(this.infoData.ID);\r\n                    } else {\r\n                        this.$message.error(res.data.msg);\r\n                    }\r\n                })\r\n            },\r\n            setData() {\r\n                // 查询模板\r\n                this.template = this.infoData.contents;\r\n                const pic = [];\r\n                for (let index = 0; index < this.infoData.pictures.length; index++) {\r\n                    const temp = {};\r\n                    temp.uid = index;\r\n                    temp.name = this.infoData.pictures[index].name;\r\n                    temp.key = this.infoData.pictures[index].key;\r\n                    temp.url = this.BASEURL + api.DOWNLOAD_FILE.url + '?fileName=' + this.infoData.pictures[index].key;\r\n                    temp.status = 'done';\r\n                    pic.push(temp);\r\n                }\r\n                this.fileList = pic;\r\n\r\n                const files = [];\r\n                for (let index = 0; index < this.infoData.attachments.length; index++) {\r\n                    const temp = {};\r\n                    temp.uid = index;\r\n                    temp.name = this.infoData.attachments[index].name;\r\n                    temp.key = this.infoData.attachments[index].key;\r\n                    temp.url = this.BASEURL + api.DOWNLOAD_FILE.url + '?fileName=' + this.infoData.attachments[index].key;\r\n                    temp.status = 'done';\r\n                    files.push(temp);\r\n                }\r\n                this.fileList2 = files;\r\n\r\n                const user = [];\r\n                for (const li of this.infoData.sendTo) {\r\n                    let flag = false;\r\n                    for (const tr of this.userList) {\r\n                        if (tr.ID === li.id) {\r\n                            flag = true;\r\n                        }\r\n                    }\r\n                    if (!flag) {\r\n                        const da = {};\r\n                        da.ID = li.id;\r\n                        da.userName = li.name;\r\n                        this.userList.push(da);\r\n                    }\r\n                    user.push(li.id);\r\n                }\r\n                this.sends = user;\r\n            },\r\n            // 图片上传\r\n            handleCancel() {\r\n                this.previewVisible = false;\r\n            },\r\n            async handlePreview(file) {\r\n                if (!file.url && !file.preview) {\r\n                    file.preview = await getBase64(file.originFileObj);\r\n                }\r\n                this.previewImage = file.url || file.preview;\r\n                this.previewVisible = true;\r\n            },\r\n            handleChange({ fileList }) {\r\n                this.fileList = fileList;\r\n            },\r\n            // 文件上传\r\n            handleChange2({ fileList }) {\r\n                this.fileList2 = fileList;\r\n            },\r\n            // 删除文件\r\n            removeFile(file) {\r\n                if (this.canEdit) {\r\n                    const params = {};\r\n                    if (file.response) {\r\n                        params.key = file.response.data.file.key;\r\n                    } else {\r\n                        params.key = file.key;\r\n                    }\r\n\r\n                    const files = [];\r\n                    for (const li of this.fileList) {\r\n                        if (li.response) {\r\n                            if (li.response.data.file.key !== params.key) {\r\n                                files.push(li);\r\n                            }\r\n                        } else if (li.key !== params.key) {\r\n                            files.push(li);\r\n                        }\r\n                    }\r\n                    this.fileList = files;\r\n\r\n                    const files2 = [];\r\n                    for (const li of this.fileList2) {\r\n                        if (li.response) {\r\n                            if (li.response.data.file.key !== params.key) {\r\n                                files2.push(li);\r\n                            }\r\n                        } else if (li.key !== params.key) {\r\n                            files2.push(li);\r\n                        }\r\n                    }\r\n                    this.fileList2 = files2;\r\n\r\n                    this.$axios.post(api.DELETE_FILE.url, params).then(res => {\r\n                        if (res.data.code === 0) {\r\n                            this.$message.success(res.data.msg);\r\n                        } else {\r\n                            this.$message.error(res.data.msg);\r\n                        }\r\n                    });\r\n                }\r\n            },\r\n            // 失去焦点事件\r\n            onEditorBlur(event, id){\r\n                document.getElementById(id).children[0].style.zIndex = '1';\r\n\r\n            },\r\n            // 获得焦点事件\r\n            onEditorFocus(event, id){\r\n                if (!this.canEdit) {\r\n                    event.enable(false);\r\n                } else {\r\n                    event.enable(true);\r\n                }\r\n                document.getElementById(id).children[0].style.zIndex = '2';\r\n            },\r\n            // 内容改变事件\r\n            onEditorChange(){\r\n                // console.log(this.template.contents);\r\n            },\r\n            // 查询人员列表\r\n            findUserList() {\r\n                const params = {};\r\n                params.page = 1;\r\n                params.pageSize = 99999;\r\n                this.$axios.post(api.GET_USER_LIST.url, params).then(res => {\r\n                    if (res.data.code === 0) {\r\n                        this.userList = res.data.data.list;\r\n                        this.setData();\r\n                    } else {\r\n                        this.$message.error(res.data.msg);\r\n                    }\r\n                })\r\n            },\r\n            userChange(select) {\r\n                const temp = [];\r\n                if (select.length > 0) {\r\n                    for (const li of this.userList) {\r\n                        for (const id of select) {\r\n                            if (li.ID === id) {\r\n                                const data = {};\r\n                                data.id = id;\r\n                                data.name = li.userName;\r\n                                temp.push(data);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                this.sendTo = temp;\r\n                if (this.sendTo.length > 0) {\r\n                    this.sendToClass = 'canSubmit';\r\n                }\r\n            },\r\n            editReports() {\r\n                const pic = [];\r\n                if (this.fileList.length > 0) {\r\n                    for (const li of this.fileList) {\r\n                        const da = {};\r\n                        if (li.response) {\r\n                            da.key = li.response.data.file.key;\r\n                            da.name = li.response.data.file.name;\r\n                        } else {\r\n                            da.key = li.key;\r\n                            da.name = li.name;\r\n                        }\r\n                        pic.push(da);\r\n                    }\r\n                }\r\n                this.pictures = pic;\r\n\r\n                const atta = [];\r\n                if (this.fileList2.length > 0) {\r\n                    for (const li of this.fileList2) {\r\n                        const da = {};\r\n                        if (li.response) {\r\n                            da.key = li.response.data.file.key;\r\n                            da.name = li.response.data.file.name;\r\n                        } else {\r\n                            da.key = li.key;\r\n                            da.name = li.name;\r\n                        }\r\n                        atta.push(da);\r\n                    }\r\n                }\r\n                this.attachments = atta;\r\n\r\n                if (this.sendTo.length === 0) {\r\n                    this.sendToClass = 'cannotSubmit';\r\n                } else {\r\n                    const params = {};\r\n                    params.id = this.infoData.ID;\r\n                    params.userId = sessionStorage.getItem('userId');\r\n                    params.userName = sessionStorage.getItem('userName');\r\n                    params.sendTo = this.sendTo;\r\n                    params.pictures = this.pictures;\r\n                    params.attachments = this.attachments;\r\n                    params.header = this.infoData.header;\r\n                    params.contents = this.infoData.contents;\r\n                    this.$axios.put(api.EDIT_REPORT.url, params).then(res => {\r\n                        if (res.data.code === 0) {\r\n                            this.$message.success(res.data.msg);\r\n                            this.fileList = [];\r\n                            this.previewVisible = false;\r\n                            this.previewImage = '';\r\n                            this.pictures = [];\r\n                            this.fileList2 = [];\r\n                            this.template = {};\r\n                            this.userList = [];\r\n                            this.attachments = [];\r\n                            this.sendTo = [];\r\n                            this.findData();\r\n                        } else {\r\n                            this.$message.error(res.data.msg);\r\n                        }\r\n                    })\r\n                }\r\n            },\r\n            // 获取周报评论\r\n            findComments(reportId) {\r\n                this.$axios.get(api.FIND_COMMENT_LIST.url + `?reportId=${reportId}&page=1&pageSise=99999`).then(res => {\r\n                    if (res.data.code === 0) {\r\n                        this.commentsList = res.data.data.list;\r\n                    } else {\r\n                        this.$message.error(res.data.msg);\r\n                    }\r\n                });\r\n            },\r\n            addComment() {\r\n                const params = {};\r\n                params.reportId = this.infoData.ID;\r\n                params.userName = sessionStorage.getItem('userName');\r\n\r\n                params.comment = this.comment;\r\n                this.$axios.post(api.ADD_COMMENT.url, params).then(res => {\r\n                    if (res.data.code === 0) {\r\n                        this.$message.success(res.data.msg);\r\n                        this.findComments(this.infoData.ID);\r\n                        this.comment = '';\r\n                    } else {\r\n                        this.$message.error(res.data.msg);\r\n                    }\r\n                });\r\n            }\r\n        },\r\n        computed: {\r\n            editor() {\r\n                return this.$refs.myQuillEditor.quill;\r\n            },\r\n        },\r\n    }\r\n</script>\r\n\r\n<style xml:lang=\"less\">\r\n    .ql-toolbar {\r\n        position: fixed;\r\n        top: 104px;\r\n        background-color: white;\r\n        width: calc(100% - 270px);\r\n        left: 260px;\r\n        border-radius: 4px;\r\n        box-shadow: 1px 2px 1px 1px rgba(144,144,144,0.1);\r\n    }\r\n    .quill-editor {\r\n        border: 1px solid #ccc;\r\n        margin: 20px 0;\r\n    }\r\n    .ql-toolbar.ql-snow .ql-picker.ql-expanded .ql-picker-options {\r\n        z-index: 3;\r\n        top: 33px;\r\n    }\r\n    .ql-snow .ql-tooltip {\r\n        left: 0!important;\r\n    }\r\n    .header_write {\r\n        text-align: center;\r\n        font-size: 18px;\r\n        font-weight: 600;\r\n    }\r\n    .readOnly {\r\n        -webkit-user-modify: read-only;\r\n    }\r\n    .canSubmit > div {\r\n        border-color: #d9d9d9;\r\n    }\r\n    .cannotSubmit > div {\r\n        border-color: red;\r\n    }\r\n    .top0 {\r\n        margin: 50px 0;\r\n    }\r\n    .top1 {\r\n        margin: 0;\r\n    }\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InfoComponent.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InfoComponent.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./InfoComponent.vue?vue&type=template&id=1116c7bf&\"\nimport script from \"./InfoComponent.vue?vue&type=script&lang=js&\"\nexport * from \"./InfoComponent.vue?vue&type=script&lang=js&\"\nimport style0 from \"./InfoComponent.vue?vue&type=style&index=0&xml%3Alang=less&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InfoComponent.vue?vue&type=style&index=0&xml%3Alang=less&lang=css&\""],"sourceRoot":""}