(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1f658693"],{"057f":function(t,e,n){var i=n("fc6a"),a=n("241c").f,r={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],o=function(t){try{return a(t)}catch(e){return s.slice()}};t.exports.f=function(t){return s&&"[object Window]"==r.call(t)?o(t):a(i(t))}},"1dde":function(t,e,n){var i=n("d039"),a=n("b622"),r=n("2d00"),s=a("species");t.exports=function(t){return r>=51||!i((function(){var e=[],n=e.constructor={};return n[s]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"312d":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.mainDiv},[n("div",[n("a-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(e){return t.tripTo()}}},[t._v(" 返回 ")])],1),n("div",{staticClass:"header_write"},[t._v(t._s(t.infoData.header))]),t._l(t.infoData.contents,(function(e,i){return n("div",{key:i},[n("div",{staticClass:"title_weekly"},[t._v(t._s(e.title)+"：")]),n("quill-editor",{ref:i,refInFor:!0,staticStyle:{"margin-top":"20px"},attrs:{id:i},on:{blur:function(e){return t.onEditorBlur(e,i)},focus:function(e){return t.onEditorFocus(e,i)},change:function(e){return t.onEditorChange(e)}},model:{value:e.content,callback:function(n){t.$set(e,"content",n)},expression:"item.content"}})],1)})),n("div",{staticClass:"title_weekly"},[t._v("图片上传")]),n("div",[n("div",{staticClass:"clearfix"},[n("a-upload",{attrs:{action:"/week/fileUploadAndDownload/upload","list-type":"picture-card","file-list":t.fileList,showUploadList:t.showUploadList,accept:".png,.jpeg,.jpg",headers:{"x-token":t.xToken,"x-user-id":t.xUserId},remove:t.removeFile},on:{preview:t.handlePreview,change:t.handleChange}},[t.canEdit?n("div",[n("a-icon",{attrs:{type:"plus"}}),n("div",{staticClass:"ant-upload-text"},[t._v(" Upload ")])],1):t._e()]),n("a-modal",{attrs:{visible:t.previewVisible,footer:null},on:{cancel:t.handleCancel}},[n("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:t.previewImage}})])],1)]),n("div",{staticClass:"title_weekly"},[t._v("文件上传")]),n("div",[n("div",{staticClass:"clearfix"},[n("a-upload",{attrs:{action:"/week/fileUploadAndDownload/upload","file-list":t.fileList2,showUploadList:t.showUploadList,headers:{"x-token":t.xToken,"x-user-id":t.xUserId},remove:t.removeFile},on:{change:t.handleChange2}},[t.canEdit?n("div",[n("a-button",[n("a-icon",{attrs:{type:"upload"}}),t._v(" Upload ")],1)],1):t._e()])],1)]),t._m(0),n("a-select",{class:t.sendToClass,staticStyle:{width:"100%"},attrs:{mode:"multiple",placeholder:"请选择人员",disabled:!t.canEdit},on:{change:t.userChange},model:{value:t.sends,callback:function(e){t.sends=e},expression:"sends"}},t._l(t.userList,(function(e){return n("a-select-option",{key:e.ID},[t._v(" "+t._s(e.nickName)+" ")])})),1),"cannotSubmit"===t.sendToClass?n("span",{staticStyle:{color:"red"}},[t._v("请选择人员")]):t._e(),t.canEdit?n("div",{staticStyle:{"text-align":"center"}},[n("a-button",{staticClass:"commit_button",attrs:{type:"primary"},on:{click:t.editReports}},[t._v(" 提交周报 ")])],1):t._e(),n("div",{staticClass:"title_comments"},[t._v("评论")]),t._l(t.commentsList,(function(e,i){return n("div",[0!==i?n("hr"):t._e(),n("div",{staticClass:"title_weekly",staticStyle:{"font-size":"16px"}},[t._v(t._s(e.nickName)+"：")]),n("div",[t._v("      "+t._s(e.comment))]),n("div",{staticStyle:{width:"100%","text-align":"right"}},[t._v(t._s(e.CreatedAt))])])})),n("div",[n("a-textarea",{attrs:{placeholder:"请输入评论",rows:4},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}}),n("div",{staticStyle:{width:"100%","text-align":"center"}},[n("a-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:t.addComment}},[t._v(" 提交评论 ")])],1)],1)],2)},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"title_weekly",staticStyle:{margin:"20px 0 0 0"}},[n("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("发送给")])}],r=n("1da1"),s=n("b85c"),o=(n("96cf"),n("d3b7"),n("a9e3"),n("b0c0"),n("159b"),n("7c15")),c=n("953d");n("a753"),n("8096"),n("14e1");function u(t){return new Promise((function(e,n){var i=new FileReader;i.readAsDataURL(t),i.onload=function(){return e(i.result)},i.onerror=function(t){return n(t)}}))}var l={name:"InfoComponent",components:{quillEditor:c["quillEditor"]},created:function(){this.infoId=JSON.parse(this.$route.query.data),this.findData()},data:function(){return{mainDiv:"top0",infoId:"",infoData:{},canEdit:!1,showUploadList:{},fileList:[],previewVisible:!1,previewImage:"",xToken:sessionStorage.getItem("login"),xUserId:sessionStorage.getItem("userId"),pictures:[],fileList2:[],template:{},userList:[],sends:[],attachments:[],sendTo:[],sendToClass:"canSubmit",commentsList:[],comment:""}},methods:{tripTo:function(){this.$router.push("viewWeeklyReport")},findData:function(){var t=this;this.$axios.get(o["a"].FIND_REPORT_BY_ID.url+"?id=".concat(this.infoId)).then((function(e){0===e.data.code?(t.infoData=e.data.data.rewtReports,t.infoData.userId===Number(sessionStorage.getItem("userId"))?t.canEdit=!0:(t.showUploadList={showRemoveIcon:!1},setTimeout((function(){var t,e=Object(s["a"])(document.getElementsByClassName("ql-toolbar"));try{for(e.s();!(t=e.n()).done;){var n=t.value;n.style.display="none"}}catch(i){e.e(i)}finally{e.f()}}),80),t.mainDiv="top1"),t.findComments(t.infoData.ID),t.findUserList().then((function(){t.setData()}))):t.$message.error(e.data.msg)}))},setData:function(){this.template=this.infoData.contents;for(var t=[],e=0;e<this.infoData.pictures.length;e++){var n={};n.uid=e,n.name=this.infoData.pictures[e].name,n.key=this.infoData.pictures[e].key,n.url=this.BASEURL+o["a"].DOWNLOAD_FILE.url+"?fileName="+this.infoData.pictures[e].key,n.status="done",t.push(n)}this.fileList=t;for(var i=[],a=0;a<this.infoData.attachments.length;a++){var r={};r.uid=a,r.name=this.infoData.attachments[a].name,r.key=this.infoData.attachments[a].key,r.url=this.BASEURL+o["a"].DOWNLOAD_FILE.url+"?fileName="+this.infoData.attachments[a].key,r.status="done",i.push(r)}this.fileList2=i;var c,u=[],l=Object(s["a"])(this.infoData.sendTo);try{for(l.s();!(c=l.n()).done;){var f,d=c.value,h=!1,m=Object(s["a"])(this.userList);try{for(m.s();!(f=m.n()).done;){var p=f.value;p.ID===d.id&&(h=!0)}}catch(y){m.e(y)}finally{m.f()}if(!h){var v={};v.ID=d.id,v.userName=d.name,this.userList.push(v)}u.push(d.id)}}catch(y){l.e(y)}finally{l.f()}this.sends=u,this.sendTo=this.infoData.sendTo},handleCancel:function(){this.previewVisible=!1},handlePreview:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.url||t.preview){n.next=4;break}return n.next=3,u(t.originFileObj);case 3:t.preview=n.sent;case 4:e.previewImage=t.url||t.preview,e.previewVisible=!0;case 6:case"end":return n.stop()}}),n)})))()},handleChange:function(t){var e=t.fileList;this.fileList=e},handleChange2:function(t){var e=t.fileList;this.fileList2=e},removeFile:function(t){var e=this;if(this.canEdit){var n={};t.response?n.key=t.response.data.file.key:n.key=t.key;var i,a=[],r=Object(s["a"])(this.fileList);try{for(r.s();!(i=r.n()).done;){var c=i.value;c.response?c.response.data.file.key!==n.key&&a.push(c):c.key!==n.key&&a.push(c)}}catch(h){r.e(h)}finally{r.f()}this.fileList=a;var u,l=[],f=Object(s["a"])(this.fileList2);try{for(f.s();!(u=f.n()).done;){var d=u.value;d.response?d.response.data.file.key!==n.key&&l.push(d):d.key!==n.key&&l.push(d)}}catch(h){f.e(h)}finally{f.f()}this.fileList2=l,this.$axios.post(o["a"].DELETE_FILE.url,n).then((function(t){0===t.data.code?e.$message.success(t.data.msg):e.$message.error(t.data.msg)}))}},onEditorBlur:function(t,e){document.getElementById(e).children[0].style.zIndex="1"},onEditorFocus:function(t,e){this.canEdit?t.enable(!0):t.enable(!1),document.getElementById(e).children[0].style.zIndex="2"},onEditorChange:function(){},findUserList:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n={},n.page=1,n.pageSize=99999,t.$axios.post(o["a"].GET_USER_LIST.url,n).then((function(e){if(0===e.data.code)return t.userList=e.data.data.list,Promise.resolve(t.userList);t.$message.error(e.data.msg)}));case 4:case"end":return e.stop()}}),e)})))()},userChange:function(t){var e=[];t.length>0&&this.userList.forEach((function(n){var i,a=Object(s["a"])(t);try{for(a.s();!(i=a.n()).done;){var r=i.value;if(n.ID===r){var o={};o.id=r,o.name=n.userName,e.push(o)}}}catch(c){a.e(c)}finally{a.f()}})),this.sendTo=e,this.sendTo.length>0&&(this.sendToClass="canSubmit")},editReports:function(){var t=this,e=[];this.fileList.length>0&&this.fileList.forEach((function(t){var n={};t.response?(n.key=t.response.data.file.key,n.name=t.response.data.file.name):(n.key=t.key,n.name=t.name),e.push(n)})),this.pictures=e;var n=[];if(this.fileList2.length>0&&this.fileList2.forEach((function(t){var e={};t.response?(e.key=t.response.data.file.key,e.name=t.response.data.file.name):(e.key=t.key,e.name=t.name),n.push(e)})),this.attachments=n,0===this.sendTo.length)this.sendToClass="cannotSubmit";else{var i={};i.id=this.infoData.ID,i.userId=sessionStorage.getItem("userId"),i.userName=sessionStorage.getItem("userName"),i.sendTo=this.sendTo,i.pictures=this.pictures,i.attachments=this.attachments,i.header=this.infoData.header,i.contents=this.infoData.contents,this.$axios.put(o["a"].EDIT_REPORT.url,i).then((function(e){0===e.data.code?(t.$message.success(e.data.msg),t.fileList=[],t.previewVisible=!1,t.previewImage="",t.pictures=[],t.fileList2=[],t.template={},t.userList=[],t.attachments=[],t.sendTo=[],t.findData()):t.$message.error(e.data.msg)}))}},findComments:function(t){var e=this;this.$axios.get(o["a"].FIND_COMMENT_LIST.url+"?reportId=".concat(t,"&page=1&pageSise=99999")).then((function(t){0===t.data.code?e.commentsList=t.data.data.list:e.$message.error(t.data.msg)}))},addComment:function(){var t=this,e={};e.reportId=this.infoData.ID,e.userName=sessionStorage.getItem("userName"),e.comment=this.comment,this.$axios.post(o["a"].ADD_COMMENT.url,e).then((function(e){0===e.data.code?(t.$message.success(e.data.msg),t.findComments(t.infoData.ID),t.comment=""):t.$message.error(e.data.msg)}))}},computed:{editor:function(){return this.$refs.myQuillEditor.quill}}},f=l,d=(n("37c1"),n("2877")),h=Object(d["a"])(f,i,a,!1,null,null,null);e["default"]=h.exports},"34f2":function(t,e,n){},"37c1":function(t,e,n){"use strict";n("34f2")},"428f":function(t,e,n){var i=n("da84");t.exports=i},"4df4":function(t,e,n){"use strict";var i=n("0366"),a=n("7b0b"),r=n("9bdd"),s=n("e95a"),o=n("68ee"),c=n("50c4"),u=n("8418"),l=n("9a1f"),f=n("35a1");t.exports=function(t){var e=a(t),n=o(this),d=arguments.length,h=d>1?arguments[1]:void 0,m=void 0!==h;m&&(h=i(h,d>2?arguments[2]:void 0,2));var p,v,y,g,b,w,k=f(e),S=0;if(!k||this==Array&&s(k))for(p=c(e.length),v=n?new this(p):Array(p);p>S;S++)w=m?h(e[S],S):e[S],u(v,S,w);else for(g=l(e,k),b=g.next,v=n?new this:[];!(y=b.call(g)).done;S++)w=m?r(g,h,[y.value,S],!0):y.value,u(v,S,w);return v.length=S,v}},"746f":function(t,e,n){var i=n("428f"),a=n("5135"),r=n("e5383"),s=n("9bf2").f;t.exports=function(t){var e=i.Symbol||(i.Symbol={});a(e,t)||s(e,t,{value:r.f(t)})}},8418:function(t,e,n){"use strict";var i=n("a04b"),a=n("9bf2"),r=n("5c6c");t.exports=function(t,e,n){var s=i(e);s in t?a.f(t,s,r(0,n)):t[s]=n}},"9bdd":function(t,e,n){var i=n("825a"),a=n("2a62");t.exports=function(t,e,n,r){try{return r?e(i(n)[0],n[1]):e(n)}catch(s){a(t,"throw",s)}}},a4d3:function(t,e,n){"use strict";var i=n("23e7"),a=n("da84"),r=n("d066"),s=n("c430"),o=n("83ab"),c=n("4930"),u=n("d039"),l=n("5135"),f=n("e8b5"),d=n("1626"),h=n("861d"),m=n("d9b5"),p=n("825a"),v=n("7b0b"),y=n("fc6a"),g=n("a04b"),b=n("577e"),w=n("5c6c"),k=n("7c73"),S=n("df75"),_=n("241c"),D=n("057f"),I=n("7418"),L=n("06cf"),x=n("9bf2"),E=n("d1e7"),O=n("6eeb"),C=n("5692"),T=n("f772"),j=n("d012"),N=n("90e3"),$=n("b622"),A=n("e5383"),U=n("746f"),R=n("d44e"),F=n("69f3"),P=n("b727").forEach,B=T("hidden"),q="Symbol",M="prototype",J=$("toPrimitive"),V=F.set,z=F.getterFor(q),W=Object[M],Q=a.Symbol,G=r("JSON","stringify"),Y=L.f,H=x.f,K=D.f,X=E.f,Z=C("symbols"),tt=C("op-symbols"),et=C("string-to-symbol-registry"),nt=C("symbol-to-string-registry"),it=C("wks"),at=a.QObject,rt=!at||!at[M]||!at[M].findChild,st=o&&u((function(){return 7!=k(H({},"a",{get:function(){return H(this,"a",{value:7}).a}})).a}))?function(t,e,n){var i=Y(W,e);i&&delete W[e],H(t,e,n),i&&t!==W&&H(W,e,i)}:H,ot=function(t,e){var n=Z[t]=k(Q[M]);return V(n,{type:q,tag:t,description:e}),o||(n.description=e),n},ct=function(t,e,n){t===W&&ct(tt,e,n),p(t);var i=g(e);return p(n),l(Z,i)?(n.enumerable?(l(t,B)&&t[B][i]&&(t[B][i]=!1),n=k(n,{enumerable:w(0,!1)})):(l(t,B)||H(t,B,w(1,{})),t[B][i]=!0),st(t,i,n)):H(t,i,n)},ut=function(t,e){p(t);var n=y(e),i=S(n).concat(mt(n));return P(i,(function(e){o&&!ft.call(n,e)||ct(t,e,n[e])})),t},lt=function(t,e){return void 0===e?k(t):ut(k(t),e)},ft=function(t){var e=g(t),n=X.call(this,e);return!(this===W&&l(Z,e)&&!l(tt,e))&&(!(n||!l(this,e)||!l(Z,e)||l(this,B)&&this[B][e])||n)},dt=function(t,e){var n=y(t),i=g(e);if(n!==W||!l(Z,i)||l(tt,i)){var a=Y(n,i);return!a||!l(Z,i)||l(n,B)&&n[B][i]||(a.enumerable=!0),a}},ht=function(t){var e=K(y(t)),n=[];return P(e,(function(t){l(Z,t)||l(j,t)||n.push(t)})),n},mt=function(t){var e=t===W,n=K(e?tt:y(t)),i=[];return P(n,(function(t){!l(Z,t)||e&&!l(W,t)||i.push(Z[t])})),i};if(c||(Q=function(){if(this instanceof Q)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?b(arguments[0]):void 0,e=N(t),n=function(t){this===W&&n.call(tt,t),l(this,B)&&l(this[B],e)&&(this[B][e]=!1),st(this,e,w(1,t))};return o&&rt&&st(W,e,{configurable:!0,set:n}),ot(e,t)},O(Q[M],"toString",(function(){return z(this).tag})),O(Q,"withoutSetter",(function(t){return ot(N(t),t)})),E.f=ft,x.f=ct,L.f=dt,_.f=D.f=ht,I.f=mt,A.f=function(t){return ot($(t),t)},o&&(H(Q[M],"description",{configurable:!0,get:function(){return z(this).description}}),s||O(W,"propertyIsEnumerable",ft,{unsafe:!0}))),i({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:Q}),P(S(it),(function(t){U(t)})),i({target:q,stat:!0,forced:!c},{for:function(t){var e=b(t);if(l(et,e))return et[e];var n=Q(e);return et[e]=n,nt[n]=e,n},keyFor:function(t){if(!m(t))throw TypeError(t+" is not a symbol");if(l(nt,t))return nt[t]},useSetter:function(){rt=!0},useSimple:function(){rt=!1}}),i({target:"Object",stat:!0,forced:!c,sham:!o},{create:lt,defineProperty:ct,defineProperties:ut,getOwnPropertyDescriptor:dt}),i({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:ht,getOwnPropertySymbols:mt}),i({target:"Object",stat:!0,forced:u((function(){I.f(1)}))},{getOwnPropertySymbols:function(t){return I.f(v(t))}}),G){var pt=!c||u((function(){var t=Q();return"[null]"!=G([t])||"{}"!=G({a:t})||"{}"!=G(Object(t))}));i({target:"JSON",stat:!0,forced:pt},{stringify:function(t,e,n){var i,a=[t],r=1;while(arguments.length>r)a.push(arguments[r++]);if(i=e,(h(e)||void 0!==t)&&!m(t))return f(e)||(e=function(t,e){if(d(i)&&(e=i.call(this,t,e)),!m(e))return e}),a[1]=e,G.apply(null,a)}})}if(!Q[M][J]){var vt=Q[M].valueOf;O(Q[M],J,(function(){return vt.apply(this,arguments)}))}R(Q,q),j[B]=!0},a630:function(t,e,n){var i=n("23e7"),a=n("4df4"),r=n("1c7e"),s=!r((function(t){Array.from(t)}));i({target:"Array",stat:!0,forced:s},{from:a})},b85c:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("fb6a"),n("b0c0"),n("a630");function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function a(t,e){if(t){if("string"===typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function r(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=a(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){c=!0,s=t},f:function(){try{o||null==n["return"]||n["return"]()}finally{if(c)throw s}}}}},d28b:function(t,e,n){var i=n("746f");i("iterator")},e01a:function(t,e,n){"use strict";var i=n("23e7"),a=n("83ab"),r=n("da84"),s=n("5135"),o=n("1626"),c=n("861d"),u=n("9bf2").f,l=n("e893"),f=r.Symbol;if(a&&o(f)&&(!("description"in f.prototype)||void 0!==f().description)){var d={},h=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof h?new f(t):void 0===t?f():f(t);return""===t&&(d[e]=!0),e};l(h,f);var m=h.prototype=f.prototype;m.constructor=h;var p=m.toString,v="Symbol(test)"==String(f("test")),y=/^Symbol\((.*)\)[^)]+$/;u(m,"description",{configurable:!0,get:function(){var t=c(this)?this.valueOf():this,e=p.call(t);if(s(d,t))return"";var n=v?e.slice(7,-1):e.replace(y,"$1");return""===n?void 0:n}}),i({global:!0,forced:!0},{Symbol:h})}},e5383:function(t,e,n){var i=n("b622");e.f=i},fb6a:function(t,e,n){"use strict";var i=n("23e7"),a=n("e8b5"),r=n("68ee"),s=n("861d"),o=n("23cb"),c=n("50c4"),u=n("fc6a"),l=n("8418"),f=n("b622"),d=n("1dde"),h=d("slice"),m=f("species"),p=[].slice,v=Math.max;i({target:"Array",proto:!0,forced:!h},{slice:function(t,e){var n,i,f,d=u(this),h=c(d.length),y=o(t,h),g=o(void 0===e?h:e,h);if(a(d)&&(n=d.constructor,r(n)&&(n===Array||a(n.prototype))?n=void 0:s(n)&&(n=n[m],null===n&&(n=void 0)),n===Array||void 0===n))return p.call(d,y,g);for(i=new(void 0===n?Array:n)(v(g-y,0)),f=0;y<g;y++,f++)y in d&&l(i,f,d[y]);return i.length=f,i}})}}]);
//# sourceMappingURL=chunk-1f658693.aa6153a5.js.map